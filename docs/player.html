<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Vossenjacht â€“ Spelerscherm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./css/style.css" />

  <!-- Extra styles voor tabs, profiel en log -->
  <style>
    /* Tabs basis */
    .vj-tab-panel {
      display: none;
    }
    .vj-tab-panel.active {
      display: block;
    }

    /* Body extra ruimte voor tabbar onderaan */
    body.player-screen {
      padding-bottom: 64px;
    }

    /* Onderste tabbar */
    .vj-tabbar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
      padding: 0.35rem 0.6rem;
      background: linear-gradient(to top, #020617, #020617dd);
      border-top: 1px solid #111827;
      display: flex;
      justify-content: center;
    }

    .vj-tabbar-inner {
      width: 100%;
      max-width: 520px;
      display: flex;
      gap: 0.4rem;
    }

    .vj-tab-button {
      flex: 1;
      border: none;
      border-radius: 999px;
      background: #020617;
      color: #9ca3af;
      font-size: 0.75rem;
      padding: 0.3rem 0.4rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.1rem;
      cursor: pointer;
      transition: background 0.1s ease, color 0.1s ease, transform 0.08s ease;
    }

    .vj-tab-button-icon {
      font-size: 1rem;
      line-height: 1;
    }

    .vj-tab-button span {
      font-size: 0.7rem;
      line-height: 1.1;
    }

    .vj-tab-button.active {
      background: #4f46e5;
      color: #e5e7eb;
      transform: translateY(-1px);
    }

    main {
      padding-bottom: 0.75rem;
    }

    /* Profiel tab */
    .vj-profile-layout {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    @media (min-width: 720px) {
      .vj-profile-layout {
        flex-direction: row;
        align-items: flex-start;
      }
    }

    .vj-profile-my,
    .vj-profile-others {
      flex: 1;
    }

    .vj-profile-card {
      border-radius: 0.75rem;
      padding: 0.8rem 0.9rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .vj-profile-card h3 {
      margin: 0 0 0.25rem 0;
      font-size: 1rem;
    }

    .vj-profile-tagline {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 0.4rem;
    }

    .vj-profile-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
      margin-bottom: 0.4rem;
    }

    .vj-badge {
      font-size: 0.7rem;
      padding: 0.1rem 0.4rem;
      border-radius: 999px;
      background: rgba(30, 64, 175, 0.3);
      border: 1px solid rgba(129, 140, 248, 0.6);
      white-space: nowrap;
    }

    .vj-badge-danger {
      background: rgba(127, 29, 29, 0.4);
      border-color: rgba(239, 68, 68, 0.8);
    }

    .vj-badge-safe {
      background: rgba(22, 101, 52, 0.4);
      border-color: rgba(74, 222, 128, 0.8);
    }

    .vj-profile-stat {
      font-size: 0.85rem;
      opacity: 0.9;
      margin-bottom: 0.3rem;
    }

    .vj-profile-subtitle {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 0.25rem;
    }

    .vj-profile-list {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .vj-profile-list button {
      width: 100%;
      text-align: left;
      border-radius: 0.6rem;
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.8rem;
      padding: 0.4rem 0.6rem;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
    }

    .vj-profile-list button.active {
      border-color: rgba(129, 140, 248, 0.9);
      background: rgba(30, 64, 175, 0.7);
    }

    .vj-profile-list-name {
      font-weight: 500;
    }

    .vj-profile-list-meta {
      font-size: 0.75rem;
      opacity: 0.85;
    }

    /* Community Log */
    .vj-log-filters {
      display: flex;
      gap: 0.3rem;
      margin-bottom: 0.4rem;
      flex-wrap: wrap;
    }

    .vj-log-filters button {
      border-radius: 999px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.75rem;
      padding: 0.15rem 0.6rem;
      cursor: pointer;
    }

    .vj-log-filters button.active {
      border-color: rgba(129, 140, 248, 0.9);
      background: rgba(30, 64, 175, 0.7);
    }

    .vj-log-list {
      max-height: 320px;
      overflow-y: auto;
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .vj-log-entry {
      padding: 0.25rem 0.4rem;
      border-radius: 0.4rem;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(31, 41, 55, 0.9);
    }

    .vj-log-entry.me {
      border-color: rgba(129, 140, 248, 0.9);
      background: rgba(30, 64, 175, 0.55);
    }

    .vj-log-entry-header {
      font-size: 0.72rem;
      opacity: 0.9;
      margin-bottom: 0.1rem;
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .vj-log-entry-body {
      font-size: 0.8rem;
    }

    .vj-log-empty {
      font-size: 0.8rem;
      opacity: 0.75;
    }
  </style>
</head>
<body class="screen player-screen">
  <header>
    <h1>Vossenjacht â€“ Speler</h1>
    <div id="gameStatus" class="game-info"></div>
  </header>

  <main>
    <!-- TAB 1: SPEL-UITLEG -->
    <section id="tab-rules" class="vj-tab-panel">
      <section class="panel">
        <h2>Vossenjacht â€“ Speluitleg</h2>
        <p style="font-size:0.9rem; opacity:0.85;">
          Je bent een tienervos in de Yard van de boerderij. â€™s Nachts vallen jullie
          het kippenhok aan om eieren en kippen te stelen. Elke raid bestaat uit
          rondes met <strong>MOVE â†’ ACTIONS â†’ DECISION â†’ REVEAL</strong>.
        </p>
        <ul style="font-size:0.85rem; opacity:0.85;">
          <li>Doel: eindig met de meeste buitpunten</li>
          <li>Egg = 1 punt Â· Hen = 2 punten Â· Prize Hen = 3 punten</li>
          <li>Blijf in de Yard voor meer buit, of DASH weg met wat je hebt</li>
        </ul>
      </section>

      <section class="panel">
        <h2>Ronde-flow</h2>
        <ol style="font-size:0.85rem; opacity:0.9;">
          <li><strong>MOVE</strong> â€“ kies Ã©Ã©n actie (SNATCH, FORAGE, SCOUT of SHIFT)</li>
          <li><strong>ACTIONS</strong> â€“ om de beurt Action Cards spelen of PASS</li>
          <li><strong>DECISION</strong> â€“ LURK / BURROW / DASH kiezen</li>
          <li><strong>REVEAL</strong> â€“ Event wordt onthuld en toegepast</li>
          <li><strong>Einde raid</strong> â€“ o.a. na 3Ã— Rooster Crow of laatste vos in de Yard</li>
        </ol>
        <p style="font-size:0.8rem; opacity:0.7; margin-top:0.5rem;">
          De Community Board op het grote scherm laat het volledige overzicht zien.
          Deze Game App helpt jou om je eigen keuzes helder te maken en uit te voeren.
        </p>
      </section>

      <section class="panel">
        <h2>Kaarten (kort overzicht)</h2>
        <p style="font-size:0.85rem; opacity:0.9; margin-bottom:0.4rem;">
          In een volgende stap vullen we hier alle Loot-, Event- en Action Cards in
          als mooie Game Cards. Voor nu is dit een beknopte uitleg van de basis.
        </p>
      </section>
    </section>

    <!-- TAB 2: PLAYER PROFILE -->
    <section id="tab-profile" class="vj-tab-panel">
      <section class="panel">
        <h2>Player Profile</h2>
        <div class="vj-profile-layout">
          <div class="vj-profile-my">
            <h3 style="margin-top:0;">Jouw vos</h3>
            <div id="profileMy"></div>
          </div>
          <div class="vj-profile-others">
            <h3 style="margin-top:0;">Overige spelers</h3>
            <p style="font-size:0.8rem; opacity:0.8; margin-bottom:0.3rem;">
              Tik een speler om zijn/haar kaart te bekijken.
            </p>
            <div id="profileOthersList" class="vj-profile-list"></div>
            <div id="profileOthersDetail" style="margin-top:0.6rem;"></div>
          </div>
        </div>
      </section>
    </section>

    <!-- TAB 3: SPELVERLOOP â€“ HUIDIGE GAME UI -->
    <section id="tab-game" class="vj-tab-panel">
      <section class="panel">
        <h2>Jij</h2>
        <div id="playerInfo"></div>
      </section>

      <section class="panel">
        <h2>Huidige event</h2>
        <div id="eventInfo"></div>
      </section>

      <section class="panel">
        <h2>MOVE â€“ Ã©Ã©n actie kiezen</h2>
        <p id="moveHint" style="font-size:0.85rem; opacity:0.8;">
          In de MOVE-fase mag je precies Ã©Ã©n actie doen zolang je in de Yard staat.
        </p>
        <div class="row">
          <button id="btnSnatch">SNATCH â€“ pak 1 loot van de Deck</button>
          <button id="btnForage">FORAGE â€“ trek 2 Action Cards</button>
        </div>
        <div class="row" style="margin-top:0.4rem;">
          <button id="btnScout">SCOUT â€“ kijk vooruit op de Event Track</button>
          <button id="btnShift">SHIFT â€“ wissel 2 Events</button>
        </div>
        <p id="moveState" style="font-size:0.8rem; opacity:0.8; margin-top:0.5rem;"></p>
      </section>

      <section class="panel">
        <h2>ACTIONS-fase</h2>
        <p style="font-size:0.85rem; opacity:0.8;">
          In de ACTIONS-fase spelen vossen om de beurt Action Cards of kiezen PASS,
          te beginnen bij de Lead Fox.
        </p>
        <div id="handPanel"></div>
        <div class="row" style="margin-top:0.5rem;">
          <button id="btnPass">PASS (geen kaart deze beurt)</button>
        </div>
        <p id="opsTurnInfo" style="font-size:0.8rem; opacity:0.8; margin-top:0.25rem;"></p>
      </section>

      <section class="panel">
        <h2>DECISION â€“ Lurk / Burrow / Dash</h2>
        <p id="decisionHint" style="font-size:0.85rem; opacity:0.8;">
          In de DECISION-fase kies je hoe je deze event-ronde ingaat.
        </p>
        <div class="row">
          <button id="btnLurk">LURK (blijven staan)</button>
          <button id="btnBurrow">BURROW (ondergronds)</button>
          <button id="btnDash">DASH (rennen met buit)</button>
        </div>
        <p id="decisionState" style="font-size:0.8rem; opacity:0.8; margin-top:0.5rem;"></p>
      </section>

      <section class="panel">
        <h2>Jouw loot</h2>
        <div id="lootPanel"></div>
      </section>
    </section>

    <!-- TAB 4: COMMUNITY LOG -->
    <section id="tab-log" class="vj-tab-panel">
      <section class="panel">
        <h2>Community Log</h2>
        <div class="vj-log-filters">
          <button type="button" data-log-filter="all" class="active">Alles</button>
          <button type="button" data-log-filter="me">Alleen mijn acties</button>
        </div>
        <div id="communityLog" class="vj-log-list">
          <div class="vj-log-empty">Log wordt geladenâ€¦</div>
        </div>
      </section>
    </section>
  </main>

  <!-- Onderaan: tab-navigatie -->
  <nav class="vj-tabbar">
    <div class="vj-tabbar-inner">
      <button class="vj-tab-button" data-tab-target="tab-rules">
        <div class="vj-tab-button-icon">ðŸ“˜</div>
        <span>Speluitleg</span>
      </button>
      <button class="vj-tab-button" data-tab-target="tab-profile">
        <div class="vj-tab-button-icon">ðŸ¦Š</div>
        <span>Profiel</span>
      </button>
      <button class="vj-tab-button" data-tab-target="tab-game">
        <div class="vj-tab-button-icon">ðŸŽ®</div>
        <span>Spelverloop</span>
      </button>
      <button class="vj-tab-button" data-tab-target="tab-log">
        <div class="vj-tab-button-icon">ðŸ“œ</div>
        <span>Log</span>
      </button>
    </div>
  </nav>

  <!-- Simpele tab-logica -->
  <script>
    (function () {
      const panels = document.querySelectorAll(".vj-tab-panel");
      const buttons = document.querySelectorAll(".vj-tab-button");

      function setActiveTab(id) {
        panels.forEach((p) => {
          p.classList.toggle("active", p.id === id);
        });
        buttons.forEach((b) => {
          b.classList.toggle(
            "active",
            b.getAttribute("data-tab-target") === id
          );
        });
      }

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = btn.getAttribute("data-tab-target");
          if (target) setActiveTab(target);
        });
      });

      // Standaard: Spelverloop actief
      setActiveTab("tab-game");
    })();
  </script>

  <!-- Bestaande game-logica -->
  <script type="module" src="./js/player.js"></script>
  <!-- Extra script voor Profiel + Community Log -->
  <script type="module" src="./js/player_profile_log.js"></script>
</body>
</html>
